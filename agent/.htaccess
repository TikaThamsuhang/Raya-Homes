# -------------------------------------------------------
# ENABLE URL REWRITING
# -------------------------------------------------------

RewriteEngine On
RewriteBase /

# -------------------------------------------------------
# REMOVE index.html FROM URL
# Redirect https://teamraya.com/index.html → https://teamraya.com/
# -------------------------------------------------------

RewriteCond %{THE_REQUEST} \s/index\.html[\s?]
RewriteRule ^index\.html$ / [R=301,L]


# -------------------------------------------------------
# CLEAN AGENT PROFILE URL
# Example: /sarah-jenkins → profile.html?agent=sarah-jenkins
# -------------------------------------------------------

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index\.html$
RewriteRule ^([^/]+)/?$ profile.html?agent=$1 [L,QSA]


# -------------------------------------------------------
# DEFAULT HOME PAGE
# -------------------------------------------------------

DirectoryIndex index.html


# -------------------------------------------------------
# ENABLE CORS FOR JSON
# -------------------------------------------------------

<IfModule mod_headers.c>
    <FilesMatch "\.json$">
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, OPTIONS"
        Header set Access-Control-Allow-Headers "Content-Type"
    </FilesMatch>
</IfModule>


# -------------------------------------------------------
# BASIC SECURITY
# -------------------------------------------------------

Options -Indexes
